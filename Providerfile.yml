provider:
  name: putenv-vcoworkflow
  version: 0.1.0.pre
  location: https://github.com/activenetwork-automation/putenv-vcoworkflow.git

  structure:

    require:
      - compute
      - annotations

    platform:
      path:
      params:
        vco_url:
          type: URL
          # match: '\A([\w-]{3,}):\/\/((?:[\w-]+\.?)+)(:[\d]+)?\/?\z'
        workflow_name:
          type: string
          match: '\A(?:[ \w-]+\/?)+\z'
        reservation_policy:
          type: string
          match: '\A(?:[\w-]+\/?)+\z'
        execute_on_behalf_of:
          type: string
          match: '\A(?:([-\._\w-]+)(?:@([\.\w-]+))?)\z'
        count:
          type: integer
          range: 1..40
        run_list:
          array:
            type: string
            match: '(role|recipe)\[([-_a-zA-Z0-9]+)\]'
        component_role:
          type: string
          match: '(role|recipe)\[([-_a-zA-Z0-9#]+)\]'

    compute:
      path: 'infrastructure/'
      params:
        ram:
          type: integer
          range: 128..262144
        cpu:
          type: integer
          range: 1..16
        image:
          type: string
          match: '^(?:[.\w-]+\/?)+\z'

    annotations:
      path: 'infrastructure/'
      params:
        tags:
          array:
            type: string
            match: '^(?:[.\w-]+\/?)+\z'
